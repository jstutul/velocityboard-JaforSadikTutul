@{
    ViewData["Title"] = "Projects";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    body {
        font-family: "Segoe UI", sans-serif;
        background: #f8f9fa;
    }

    .hero {
        background: linear-gradient(to right, #6a11cb, #2575fc);
        padding: 100px 0;
        color: white;
        text-align: center;
    }

        .hero h1 {
            font-size: 3rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.25rem;
            opacity: 0.9;
        }

    .feature-icon {
        font-size: 40px;
        color: #6a11cb;
    }

    .footer {
        padding: 20px 0;
        text-align: center;
        color: #777;
        background: #f1f1f1;
    }

    .btn-primary {
        background: #6a11cb;
        border: none;
    }

        .btn-primary:hover {
            background: #2575fc;
        }
</style>
<section class="hero">
    <div class="container">
        <h1>Welcome to VelocityBoard</h1>
        <p>Your smart workspace to manage projects, tasks, and teams effortlessly.</p>

        <div class="mt-4">
            <a href="@Url.Action("Index","Task")" class="btn btn-primary px-4 py-2">Dashboard</a>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Why VelocityBoard?</h2>
            <p class="text-muted">Simple. Fast. Powerful.</p>
        </div>

        <div class="row g-4">
            <div class="col-md-4">
                <div class="card shadow-sm p-4 text-center">
                    <div class="feature-icon mb-3">
                        <i class="bi bi-kanban"></i>
                    </div>
                    <h5 class="fw-bold">Project Tracking</h5>
                    <p class="text-muted">Easily manage and monitor all your ongoing projects in one dashboard.</p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card shadow-sm p-4 text-center">
                    <div class="feature-icon mb-3">
                        <i class="bi bi-people"></i>
                    </div>
                    <h5 class="fw-bold">Team Collaboration</h5>
                    <p class="text-muted">Assign tasks, communicate, and collaborate with team members instantly.</p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card shadow-sm p-4 text-center">
                    <div class="feature-icon mb-3">
                        <i class="bi bi-graph-up"></i>
                    </div>
                    <h5 class="fw-bold">Analytics</h5>
                    <p class="text-muted">Track progress and see performance insights in real time.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <p>VelocityBoard © @DateTime.Now.Year. All rights reserved.</p>
    </div>
</footer>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(function () {

            loadProjects();

            // Load projects
            function loadProjects() {
                $.get('/Project/GetProjects', function (data) {
                    var rows = '';
                    data.forEach(p => {
                        rows += `<tr>
                                    <td>${p.id}</td>
                                    <td>${p.name}</td>
                                    <td>${p.description}</td>
                                    <td>
                                        <button class="btn btn-sm btn-primary edit" data-id="${p.id}" data-name="${p.name}" data-desc="${p.description}">Edit</button>
                                        <button class="btn btn-sm btn-danger delete" data-id="${p.id}">Delete</button>
                                    </td>
                                </tr>`;
                    });
                    $('#projectTable tbody').html(rows);
                });
            }

            // Add project button
            $('#btnAdd').click(function () {
                $('#projectId').val('');
                $('#projectName').val('');
                $('#projectDescription').val('');
                $('#projectModal').modal('show');
            });

            // Save project
            $('#saveProject').click(function () {
                var project = {
                    Id: $('#projectId').val(),
                    Name: $('#projectName').val(),
                    Description: $('#projectDescription').val()
                };

                if (!project.Id) {
                    // Create
                    $.ajax({
                        url: '/Project/CreateProject',
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify(project),
                        success: function () {
                            $('#projectModal').modal('hide');
                            loadProjects();
                        }
                    });
                } else {
                    // Update
                    $.ajax({
                        url: '/Project/UpdateProject',
                        type: 'PUT',
                        contentType: 'application/json',
                        data: JSON.stringify(project),
                        success: function () {
                            $('#projectModal').modal('hide');
                            loadProjects();
                        }
                    });
                }
            });

            // Edit button
            $(document).on('click', '.edit', function () {
                $('#projectId').val($(this).data('id'));
                $('#projectName').val($(this).data('name'));
                $('#projectDescription').val($(this).data('desc'));
                $('#projectModal').modal('show');
            });

            // Delete button
            $(document).on('click', '.delete', function () {
                if (confirm('Are you sure?')) {
                    var id = $(this).data('id');
                    $.ajax({
                        url: '/Project/DeleteProject/' + id,
                        type: 'DELETE',
                        success: function () {
                            loadProjects();
                        }
                    });
                }
            });
        });
    </script>
}
